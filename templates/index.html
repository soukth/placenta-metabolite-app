



const formData = new FormData();
formData.append("file", file);


document.getElementById("status").innerText = "Analyzing…";


fetch("/analyze", { method: "POST", body: formData })
.then(r => r.json())
.then(data => {
JOB_ID = data.job_id;
document.getElementById("status").innerText = "Analysis complete ✔";
});
}


function loadEvidence() {
fetch(`/evidence/${JOB_ID}`)
.then(r => r.json())
.then(renderTable);
}


function loadPathways() {
fetch(`/pathways/${JOB_ID}`)
.then(r => r.json())
.then(renderTable);
}


function download() {
window.location = `/download/${JOB_ID}`;
}


function renderTable(rows) {
let html = "<table class='w-full border'>";
html += "<tr class='bg-indigo-100'>";
Object.keys(rows[0]).forEach(k => {
html += `<th class='p-2 border'>${k}</th>`;
});
html += "</tr>";


rows.forEach(r => {
html += "<tr>";
Object.values(r).forEach(v => {
html += `<td class='p-2 border text-sm'>${v}</td>`;
});
html += "</tr>";
});


html += "</table>";
document.getElementById("results").innerHTML = html;
}
</script>


</body>
</html>
